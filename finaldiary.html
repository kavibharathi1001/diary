<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diarytoon | Absolute Guardian Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-purple: #bc13fe;
            --neon-blue: #00d2ff;
            --deep-space: #050816;
            --glass-white: rgba(255, 255, 255, 0.03);
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--deep-space);
            background-image: 
                radial-gradient(circle at 5% 5%, rgba(188, 19, 254, 0.12) 0%, transparent 40%),
                radial-gradient(circle at 95% 95%, rgba(0, 210, 255, 0.12) 0%, transparent 40%);
            color: #e2e8f0;
            background-attachment: fixed;
            overflow-x: hidden;
        }
        .orbitron { font-family: 'Orbitron', sans-serif; }
        .glass-card {
            background: var(--glass-white);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
        }
        .nav-item {
            cursor: pointer;
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 900;
            font-size: 0.65rem;
            color: #64748b;
        }
        .nav-item.active {
            color: var(--neon-blue);
            text-shadow: 0 0 15px var(--neon-blue);
            border-bottom: 2px solid var(--neon-blue);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .btn-dopamine {
            background: linear-gradient(135deg, #6366f1, #a855f7);
            box-shadow: 0 0 25px rgba(99, 102, 241, 0.4);
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }
        .btn-dopamine:hover {
            box-shadow: 0 0 40px rgba(168, 85, 247, 0.6);
            transform: translateY(-2px);
        }

        .fault-glow {
            border-left: 4px solid #ef4444;
            background: rgba(239, 68, 68, 0.05);
            animation: pulse-red 2s infinite;
        }
        @keyframes pulse-red { 0% { border-color: #ef4444; } 50% { border-color: #7f1d1d; } 100% { border-color: #ef4444; } }

        .scroll-custom::-webkit-scrollbar { width: 4px; }
        .scroll-custom::-webkit-scrollbar-track { background: transparent; }
        .scroll-custom::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .sentiment-happy { color: #4ade80; text-shadow: 0 0 8px #22c55e; }
        .sentiment-sad { color: #f87171; text-shadow: 0 0 8px #ef4444; }
        
        .stat-bar { height: 4px; background: rgba(255,255,255,0.05); border-radius: 2px; overflow: hidden; }
        .stat-fill { height: 100%; transition: width 1s ease-in-out; }

        .vibe-neo { filter: contrast(1.2) saturate(1.4) hue-rotate(20deg); }
        .vibe-ghost { filter: grayscale(0.4) brightness(1.2) contrast(1.1); }
        .vibe-gold { filter: sepia(0.5) saturate(1.8) brightness(0.9); }
    </style>
</head>
<body class="min-h-screen pb-24">

    <nav class="sticky top-0 z-50 bg-black/60 backdrop-blur-2xl border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3 group" onclick="switchTab('home')" style="cursor:pointer">
                <div class="w-8 h-8 bg-gradient-to-tr from-purple-600 to-blue-500 rounded-xl shadow-[0_0_15px_rgba(188,19,254,0.4)]"></div>
                <span class="text-2xl font-black tracking-tighter orbitron text-white">DIARYTOON<span class="text-cyan-400">.AI</span></span>
            </div>
            <div class="hidden lg:flex gap-10">
                <div onclick="switchTab('home')" class="nav-item active" id="btn-home">Home</div>
                <div onclick="switchTab('diary')" class="nav-item" id="btn-diary">Journal</div>
                <div onclick="switchTab('social')" class="nav-item" id="btn-social">Network</div>
                <div onclick="switchTab('robot')" class="nav-item" id="btn-robot">Robot</div>
                <div onclick="switchTab('decode')" class="nav-item" id="btn-decode">Matrix</div>
                <div onclick="switchTab('profile')" class="nav-item" id="btn-profile">Profile</div>
                <div onclick="switchTab('premium')" class="nav-item" id="btn-premium">Premium</div>
            </div>
            <div class="text-[8px] orbitron font-black text-cyan-400/50">ENCRYPTION: AES-256 ACTIVE</div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto p-6 mt-6">
        
        <!-- Tab: Home -->
        <section id="content-home" class="tab-content active">
            <div class="glass-card p-12 rounded-[50px] relative overflow-hidden">
                <div class="flex flex-col md:flex-row items-center justify-between gap-10">
                    <div class="text-left flex-1">
                        <p class="text-[10px] font-black tracking-[0.6em] text-purple-400 mb-4 uppercase orbitron">Guardian Mindset Active</p>
                        <h1 class="text-6xl font-black text-white italic tracking-tighter mb-6 orbitron leading-none">THE FUTURE IS <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">ENCRYPTED</span></h1>
                        <p class="text-gray-400 font-medium max-w-lg leading-relaxed text-lg mb-8">Identify your life faults, solve them with AI mentorship, and manifest your growth as cinematic artifacts.</p>
                        <div class="flex gap-4">
                            <button onclick="switchTab('diary')" class="px-8 py-4 btn-dopamine rounded-2xl text-[10px] font-black orbitron uppercase tracking-widest text-white">Start Daily Scan</button>
                            <button onclick="switchTab('social')" class="px-8 py-4 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black orbitron uppercase tracking-widest text-gray-300 hover:bg-white/10 transition">Enter Feed</button>
                        </div>
                    </div>
                    <div class="w-full md:w-80 space-y-4">
                        <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                            <p class="text-[9px] font-black text-cyan-400 uppercase orbitron mb-3">Wellness Pulse</p>
                            <div class="flex items-end gap-1 h-12">
                                <div class="w-2 bg-cyan-400 h-1/2 rounded-t-sm animate-pulse"></div>
                                <div class="w-2 bg-cyan-400 h-3/4 rounded-t-sm"></div>
                                <div class="w-2 bg-cyan-400 h-2/3 rounded-t-sm animate-bounce"></div>
                                <div class="w-2 bg-cyan-400 h-full rounded-t-sm"></div>
                                <div class="w-2 bg-cyan-400 h-1/3 rounded-t-sm"></div>
                            </div>
                        </div>
                        <div class="p-6 bg-purple-900/10 rounded-3xl border border-purple-500/20">
                            <p class="text-[9px] font-black text-purple-400 uppercase orbitron mb-2">Credits Earned</p>
                            <p class="text-3xl font-black text-white orbitron">1,250</p>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-16">
                    <div class="p-8 bg-white/5 rounded-[35px] border border-white/10">
                        <p class="text-[10px] font-black text-cyan-400 uppercase orbitron mb-2">Fault Frequency</p>
                        <p class="text-4xl font-black text-white">-14% <span class="text-xs text-green-400 tracking-tighter">IMPROVED</span></p>
                    </div>
                    <div class="p-8 bg-white/5 rounded-[35px] border border-white/10">
                        <p class="text-[10px] font-black text-purple-400 uppercase orbitron mb-2">Dopamine Multiplier</p>
                        <p class="text-4xl font-black text-white">x2.4</p>
                    </div>
                    <div class="p-8 bg-white/5 rounded-[35px] border border-white/10">
                        <p class="text-[10px] font-black text-indigo-400 uppercase orbitron mb-2">Robot Character Sync</p>
                        <p class="text-4xl font-black text-white italic">SYNNCED</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Diary -->
        <section id="content-diary" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 glass-card p-10 rounded-[45px]">
                    <h2 class="text-2xl font-black text-white tracking-tighter orbitron italic mb-8 uppercase">Neural Journaling</h2>
                    <textarea id="diary-input" rows="12" class="w-full p-8 rounded-[35px] text-xl font-medium bg-black/20 border border-white/5 focus:border-cyan-400/50 transition-all outline-none resize-none placeholder-gray-700" placeholder="What stressors did you encounter today? Any mistakes you wish to correct? AI Mentor is listening..."></textarea>
                    
                    <div class="flex gap-4 mt-8">
                        <button id="process-btn" onclick="processDiary()" class="flex-1 py-6 btn-dopamine text-white rounded-[30px] font-black uppercase tracking-widest text-sm orbitron disabled:opacity-50" disabled>MANIFEST GROWTH</button>
                    </div>

                    <div id="loading" class="hidden mt-12 text-center py-10">
                        <div class="w-16 h-16 border-4 border-cyan-400/10 border-t-cyan-400 rounded-full animate-spin mx-auto mb-6"></div>
                        <p class="text-xs font-black text-cyan-400 orbitron uppercase tracking-[0.3em] animate-pulse">Running Fault Analysis...</p>
                    </div>

                    <div id="mentor-panel" class="hidden mt-12 space-y-8">
                        <div class="p-8 bg-red-500/5 border border-red-500/20 rounded-[35px] fault-glow">
                            <h3 class="text-[10px] font-black text-red-400 uppercase tracking-widest mb-4 orbitron">Fault Pattern Identified ‚ö†Ô∏è</h3>
                            <p id="fault-text" class="text-gray-200 text-lg leading-relaxed"></p>
                            <div class="mt-6 pt-6 border-t border-red-500/10">
                                <p class="text-[9px] font-black text-green-400 uppercase mb-2">Mentor Recommendation:</p>
                                <p id="solution-text" class="text-gray-400 italic text-sm"></p>
                            </div>
                        </div>
                        <div class="p-8 bg-indigo-900/10 border border-indigo-500/20 rounded-[35px]">
                            <h3 class="text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4 orbitron">Transformed Poem üé∂</h3>
                            <div id="poem-display" class="text-2xl text-white italic leading-relaxed text-center whitespace-pre-line"></div>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-1 space-y-8">
                    <div class="glass-card p-8 rounded-[45px] text-center">
                        <h3 class="text-[10px] font-black text-gray-500 uppercase tracking-widest mb-6 orbitron">Art Manifestation</h3>
                        <div id="img-frame" class="bg-black/40 aspect-square rounded-[35px] flex items-center justify-center border border-white/5 shadow-inner overflow-hidden">
                            <span class="text-[10px] font-black text-gray-800 uppercase italic p-12">Awaiting Synapse...</span>
                        </div>
                        <div id="vibe-filters" class="hidden mt-8 grid grid-cols-4 gap-2">
                            <button onclick="setFilter('none')" class="bg-gray-800 p-2 rounded-lg text-[8px] font-black">RAW</button>
                            <button onclick="setFilter('neo')" class="bg-indigo-900 p-2 rounded-lg text-[8px] font-black">NEO</button>
                            <button onclick="setFilter('ghost')" class="bg-cyan-900 p-2 rounded-lg text-[8px] font-black">GHOST</button>
                            <button onclick="setFilter('gold')" class="bg-yellow-900 p-2 rounded-lg text-[8px] font-black">GOLD</button>
                        </div>
                        <div id="actions" class="hidden mt-6 flex flex-col gap-3">
                            <button onclick="downloadImg()" class="w-full py-4 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-black uppercase orbitron">üì• Save Artifact</button>
                            <button onclick="shareFeed()" class="w-full py-4 bg-cyan-400 text-black rounded-2xl text-[10px] font-black uppercase orbitron hover:bg-cyan-300">üåê Share VIP Feed</button>
                        </div>
                    </div>
                    <div id="language-box" class="hidden p-8 bg-emerald-500/5 border border-emerald-500/20 rounded-[35px]">
                        <p class="text-[9px] font-black text-emerald-400 uppercase orbitron mb-3">Language Polish ‚ú®</p>
                        <p id="polished-text" class="text-xs text-gray-500 leading-relaxed italic mb-4"></p>
                        <button onclick="applyCorrection()" class="text-[9px] font-black text-emerald-400 uppercase hover:underline">Apply Improvement</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Social (Network) -->
        <section id="content-social" class="tab-content">
            <div class="max-w-5xl mx-auto space-y-12">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    <h2 class="text-4xl font-black italic tracking-tighter orbitron uppercase">Neural <span class="text-cyan-400">Network Feed</span></h2>
                    <div class="flex bg-black/40 p-1 rounded-2xl border border-white/10">
                        <button onclick="switchFeed('own')" id="f-own" class="px-8 py-3 rounded-xl text-[10px] font-black uppercase bg-cyan-400 text-black transition-all">OWN NETWORK</button>
                        <button onclick="switchFeed('ig')" id="f-ig" class="px-8 py-3 rounded-xl text-[10px] font-black uppercase text-gray-500 transition-all hover:text-white">INSTAGRAM HUB</button>
                    </div>
                </div>

                <div id="feed-own-content" class="space-y-16">
                    <!-- Historical Section -->
                    <div>
                        <h3 class="text-[11px] font-black text-purple-400 uppercase tracking-[0.4em] border-b border-purple-500/20 pb-4 mb-8">TAMIL IMPERIAL DOCUMENTARIES ‚öîÔ∏è</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-purple-500">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Video Archive: The Legend of King Perumbidugu Mutharayar & The Golden Age</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">Mutharayar Kings: Imperial Sovereignty</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Tracing the lineage of the Great Tamil Emperor. Exploring architectural triumphs and the administrative genius that defined an era of prosperity.</p>
                                </div>
                            </div>
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-orange-500">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Video Archive: Chola Maritime Supremacy & Naval Power</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">The Chola Kings: Masters of the Sea</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Documentary on Raja Raja Chola and the expansion of Tamil culture across the oceans.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Arabian/Dubai Section -->
                    <div>
                        <h3 class="text-[11px] font-black text-blue-400 uppercase tracking-[0.4em] border-b border-blue-500/20 pb-4 mb-8">ARABIAN ROYALTY & GLOBAL HERITAGE üèúÔ∏è</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-blue-400">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Video Archive: The Great Arab Kings & Desert Leadership</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">Arab Rulers: Vision and Valor</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Chronicle of historical Arabian leadership and their lasting impact on global trade and culture.</p>
                                </div>
                            </div>
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-cyan-400">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Cultural Archive: Dubai Version - Modernity meets Tradition</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">Dubai Vision: The Oasis Economy</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Exploring the cultural evolution of Dubai from pearl diving to the tech capital of the Middle East.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Spiritual Section -->
                    <div>
                        <h3 class="text-[11px] font-black text-emerald-400 uppercase tracking-[0.4em] border-b border-emerald-500/20 pb-4 mb-8">SPIRITUAL WISDOM ARCHIVES üìñ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-emerald-500">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Scriptural Archive: Holy Quran - Lessons for Humanity</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">Islamic Wisdom: Quranic Guidance</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Curated recitations and philosophical breakdowns focusing on mental peace and social justice.</p>
                                </div>
                            </div>
                            <div class="glass-card overflow-hidden rounded-[40px] border-l-4 border-yellow-500">
                                <div class="bg-black aspect-video flex items-center justify-center font-black text-[10px] text-gray-800 uppercase italic p-10 text-center">Scriptural Archive: Bhagavad Gita - The Path of Dharma</div>
                                <div class="p-8">
                                    <h4 class="font-black text-white uppercase text-sm mb-3">Eternal Philosophy: The Bhagavad Gita</h4>
                                    <p class="text-[10px] text-gray-500 leading-relaxed">Exploring the conversation between Krishna and Arjuna as a blueprint for overcoming life's faults.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Manifestations -->
                    <div>
                        <h3 class="text-[11px] font-black text-cyan-400 uppercase tracking-[0.4em] border-b border-cyan-400/20 pb-4 mb-8">COMMUNITY MANIFESTATIONS üåê</h3>
                        <div id="social-shared-feed" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="glass-card p-6 rounded-[35px] border-white/10 opacity-50 border-dashed border-2 flex flex-col items-center justify-center py-20 col-span-full">
                                <p class="text-[10px] font-black text-gray-600 uppercase italic">Your shared artifacts appear here in the community network</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="feed-ig-content" class="hidden py-40 text-center glass-card rounded-[50px] border border-white/10">
                    <div class="w-24 h-24 bg-gradient-to-tr from-orange-400 to-pink-600 rounded-[30px] mx-auto mb-8 flex items-center justify-center shadow-[0_0_50px_rgba(249,115,22,0.3)]">
                        <span class="text-white text-4xl font-black">IG</span>
                    </div>
                    <h3 class="text-3xl font-black text-white italic tracking-tighter uppercase mb-4">Bridge External Social Hub</h3>
                    <p class="text-gray-500 text-sm max-w-sm mx-auto mb-10 leading-relaxed">Cross-share your Diarytoon artifacts and composed poems directly to Instagram Stories and Feed.</p>
                    <button class="px-12 py-5 bg-white text-black font-black rounded-3xl text-[10px] tracking-widest uppercase hover:bg-gray-200 transition-all">CONNECT INSTAGRAM API</button>
                </div>
            </div>
        </section>

        <!-- Tab: Robot -->
        <section id="content-robot" class="tab-content">
            <div class="max-w-4xl mx-auto glass-card p-12 rounded-[50px] relative overflow-hidden">
                <div class="flex items-center gap-6 mb-12">
                    <div class="w-20 h-20 bg-gradient-to-tr from-cyan-400 to-blue-600 rounded-3xl flex items-center justify-center orbitron text-black font-black text-3xl">D.01</div>
                    <div>
                        <h2 class="text-3xl font-black text-white orbitron">DIARYTOON DROID TRAINING</h2>
                        <p class="text-cyan-400 text-xs font-black uppercase tracking-widest">VIP RESIDENCY HARDWARE</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div class="space-y-8">
                        <h3 class="text-xs font-black text-gray-400 uppercase tracking-[0.2em] border-b border-white/10 pb-2">Droid Core Neural Nodes</h3>
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between text-[10px] font-black uppercase mb-2"><span>Character Mirroring</span><span class="text-cyan-400">84%</span></div>
                                <div class="stat-bar"><div class="stat-fill bg-cyan-400" style="width: 84%"></div></div>
                            </div>
                            <div>
                                <div class="flex justify-between text-[10px] font-black uppercase mb-2"><span>Fault Correction Logic</span><span class="text-purple-400">92%</span></div>
                                <div class="stat-bar"><div class="stat-fill bg-purple-400" style="width: 92%"></div></div>
                            </div>
                        </div>
                        <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                            <h4 class="text-[10px] font-black text-white uppercase mb-3">Linked Circle Mapping</h4>
                            <p class="text-[9px] text-gray-500 leading-relaxed italic">Training the droid to recognize relationship patterns and alert you to potential misunderstandings before they cause isolation. Account identity: Kavibharathi.</p>
                        </div>
                        <button class="w-full py-4 btn-dopamine text-white rounded-2xl text-[10px] font-black uppercase orbitron tracking-widest">Update Droid Identity</button>
                    </div>
                    <div class="flex items-center justify-center bg-black/40 rounded-[40px] border border-white/5 relative">
                        <div class="absolute inset-0 flex items-center justify-center opacity-10">
                            <svg width="200" height="300" viewBox="0 0 100 150"><rect x="30" y="40" width="40" height="70" rx="5" stroke="white" stroke-width="1" fill="none"/></svg>
                        </div>
                        <p class="text-[10px] font-black text-gray-600 uppercase italic p-12 text-center leading-relaxed">Hardware Visual: Industrial Robot Companion. Shipped Worldwide via VIP WHITE-GLOVE LOGISTICS.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Matrix (Profile) -->
        <section id="content-profile" class="tab-content">
            <div class="glass-card p-12 rounded-[50px] text-center">
                <div class="relative w-32 h-32 mx-auto mb-8">
                    <div class="absolute inset-0 bg-cyan-400 blur-2xl opacity-20 animate-pulse"></div>
                    <div class="w-full h-full rounded-[40px] bg-gradient-to-br from-purple-600 to-cyan-500 p-[2px]">
                        <div class="w-full h-full rounded-[38px] bg-black flex items-center justify-center text-4xl font-black text-white orbitron uppercase">KB</div>
                    </div>
                </div>
                <h2 class="text-4xl font-black text-white mt-8 tracking-tighter orbitron italic">KAVIBHARATHI</h2>
                <p id="auth-status-ui" class="text-[9px] text-cyan-400 font-black tracking-[0.4em] mt-3 uppercase orbitron">IDENTITY LEVEL: VIP ABSOLUTE GUARDIAN</p>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12">
                    <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                        <p class="text-[8px] font-black text-gray-500 uppercase mb-2">Life Faults Solved</p>
                        <p class="text-2xl font-black text-white orbitron">128</p>
                    </div>
                    <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                        <p class="text-[8px] font-black text-gray-500 uppercase mb-2">Total Life Scans</p>
                        <p class="text-2xl font-black text-white orbitron">342</p>
                    </div>
                    <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                        <p class="text-[8px] font-black text-gray-500 uppercase mb-2">Dopamine Balance</p>
                        <p class="text-2xl font-black text-white orbitron">4.8k</p>
                    </div>
                    <div class="p-6 bg-white/5 rounded-3xl border border-white/10">
                        <p class="text-[8px] font-black text-gray-500 uppercase mb-2">Shared Artifacts</p>
                        <p class="text-2xl font-black text-white orbitron">15</p>
                    </div>
                </div>

                <div class="mt-16 text-left border-t border-white/5 pt-12">
                    <h3 class="text-xs font-black text-gray-500 uppercase tracking-widest mb-10 orbitron">Archived Life Synapses (Diary Data)</h3>
                    <div id="history-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6 scroll-custom max-h-[600px] overflow-y-auto">
                        <!-- History data loaded via JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Premium -->
        <section id="content-premium" class="tab-content">
            <div class="max-w-6xl mx-auto text-center">
                <h2 class="text-6xl font-black text-white italic tracking-tighter uppercase mb-16 orbitron">VIP <span class="text-cyan-400">EVOLUTION</span></h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Standard -->
                    <div class="glass-card p-10 rounded-[45px] border border-white/5 opacity-50 flex flex-col grayscale">
                        <h3 class="font-black text-gray-400 uppercase text-xs orbitron mb-4">Standard Node</h3>
                        <p class="text-4xl font-black text-white mt-4">$0 <span class="text-xs text-gray-600">/ forever</span></p>
                        <ul class="mt-10 space-y-4 text-[10px] text-gray-500 text-left flex-grow font-black">
                            <li>‚úî Secure Encrypted Diary Storage</li>
                            <li>‚úî Basic AI Sentiment Analysis</li>
                            <li>‚úî 1 Daily Artifact Manifestation</li>
                            <li>‚úî Global Feed Access</li>
                        </ul>
                        <button class="mt-10 py-4 bg-white/10 text-white rounded-2xl font-black uppercase text-[10px] orbitron cursor-not-allowed">Active Tier</button>
                    </div>
                    <!-- Guardian Plus -->
                    <div class="glass-card p-10 rounded-[45px] border-2 border-indigo-500 bg-indigo-950/10 scale-105 shadow-[0_0_40px_rgba(99,102,241,0.2)] flex flex-col relative">
                        <span class="absolute -top-4 left-1/2 -translate-x-1/2 bg-indigo-500 text-black text-[9px] font-black px-6 py-1.5 rounded-full uppercase orbitron shadow-xl tracking-widest">Popular</span>
                        <h3 class="font-black text-indigo-400 uppercase text-xs orbitron mb-4">Guardian Plus</h3>
                        <p class="text-4xl font-black text-white mt-4">$9.99 <span class="text-xs text-gray-500">/ mo</span></p>
                        <ul class="mt-10 space-y-4 text-[10px] text-gray-300 text-left flex-grow font-black leading-relaxed">
                            <li>‚ú® AI Life-Fault Identification & Solution</li>
                            <li>‚ú® 24/7 Personalized AI Life Mentor</li>
                            <li>‚ú® Composed Poetry & Orchestral Music</li>
                            <li>‚ú® AI Language & Communication Improvement</li>
                            <li>‚ú® Unlimited Art Filters (Neo, Gold, Ghost)</li>
                        </ul>
                        <button class="mt-10 py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] orbitron shadow-lg shadow-indigo-500/40">Initialize Plus</button>
                    </div>
                    <!-- Absolute Guardian VIP -->
                    <div class="glass-card p-10 rounded-[45px] border-2 border-cyan-400 bg-cyan-950/10 flex flex-col relative shadow-[0_0_50px_rgba(0,210,255,0.2)]">
                        <span class="absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-400 text-black text-[9px] font-black px-6 py-1.5 rounded-full uppercase orbitron shadow-xl tracking-widest">VIP SHIP ELITE</span>
                        <h3 class="font-black text-cyan-400 uppercase text-xs orbitron mb-4">Absolute Guardian</h3>
                        <p class="text-4xl font-black text-white mt-4">$9,999.99 <span class="text-xs text-gray-500">/ lifetime</span></p>
                        <ul class="mt-10 space-y-4 text-[10px] text-gray-200 text-left flex-grow font-black leading-relaxed">
                            <li>ü§ñ **Absolute Guardian Robot Hardware**: Physical droid linked to your persona.</li>
                            <li>üì¶ **VIP White-Glove Global Shipping**: Fully insured industrial shipment.</li>
                            <li>üß† **Individual Character Training**: Train your droid on your life history and friends.</li>
                            <li>üéûÔ∏è **Full Documentary Life Movies**: Cinematic journey of your growth.</li>
                            <li>ü•Ω **VR Stress Buster Matrix**: Unlimited immersive therapy worlds.</li>
                        </ul>
                        <button class="mt-10 py-5 bg-cyan-400 text-black rounded-2xl font-black uppercase text-[10px] orbitron">Order VIP Residence</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Decode Matrix -->
        <section id="content-decode" class="tab-content">
            <div class="max-w-2xl mx-auto glass-card p-10 rounded-[40px]">
                <h2 class="text-2xl font-black text-white tracking-tighter mb-10 flex justify-between items-center orbitron">
                    DECODE MATRIX
                    <span class="bg-cyan-400 text-black px-3 py-1 rounded-full text-[9px] font-black uppercase">Earn 100 CRD</span>
                </h2>
                <div id="decode-img-slot" class="bg-black aspect-square rounded-3xl border border-white/10 flex items-center justify-center mb-10 overflow-hidden shadow-2xl">
                    <p class="text-[10px] font-black text-gray-700 uppercase italic p-12 text-center leading-relaxed">System Offline. Manifest a journal artifact to activate the pattern recognition sequence.</p>
                </div>
                <div id="decode-input-area" class="hidden">
                    <input type="text" id="guess-input" class="w-full p-6 rounded-3xl text-center text-xl font-bold mb-6 bg-white/5 border border-white/10 text-white outline-none focus:border-cyan-400 transition-all" placeholder="Enter Pattern Hypothesis...">
                    <button onclick="runMatrixDecode()" class="w-full py-5 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-3xl font-black tracking-widest orbitron hover:shadow-[0_0_20px_rgba(0,210,255,0.4)]">EXECUTE DECRYPTION</button>
                    <div id="decode-feedback" class="mt-8 hidden p-6 rounded-3xl text-center font-black orbitron uppercase"></div>
                </div>
            </div>
        </section>

    </main>

    <!-- Global Notification -->
    <div id="haptic-notifier" class="fixed top-24 right-8 z-[200] px-8 py-5 rounded-[25px] glass-card border-l-4 border-cyan-400 hidden animate-slideUp">
        <p id="haptic-msg" class="text-[11px] font-black text-white uppercase tracking-[0.2em] orbitron"></p>
    </div>

    <!-- Status Bar -->
    <div class="fixed bottom-0 left-0 right-0 p-1 bg-black text-[8px] font-black text-cyan-400 text-center opacity-70 tracking-[0.4em] uppercase border-t border-cyan-950 z-[100] orbitron">
        Absolute Guardian Ecosystem Node // Neural Logic Sync: 100% // User Node: <span id="user-status-tag">Detecting...</span>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, addDoc, onSnapshot, collection, query, serverTimestamp, orderBy, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'diarytoon-absolute-v2';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        let db, auth, currentUserId = null, lastResultImg = null, correctedText = "";

        const API_KEY = ""; 
        const GEMINI_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=";
        const IMAGEN_URL = "https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=";

        window.switchTab = (tab) => {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`content-${tab}`).classList.add('active');
            const navBtn = document.getElementById(`btn-${tab}`);
            if (navBtn) navBtn.classList.add('active');
            window.scrollTo(0,0);
        };

        window.switchFeed = (type) => {
            const isOwn = type === 'own';
            document.getElementById('feed-own-content').classList.toggle('hidden', !isOwn);
            document.getElementById('feed-ig-content').classList.toggle('hidden', isOwn);
            document.getElementById('f-own').className = `px-8 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${isOwn ? 'bg-cyan-400 text-black shadow-[0_0_10px_rgba(0,210,255,0.3)]' : 'text-gray-500'}`;
            document.getElementById('f-ig').className = `px-8 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${!isOwn ? 'bg-cyan-400 text-black shadow-[0_0_10px_rgba(0,210,255,0.3)]' : 'text-gray-500'}`;
        };

        const showNotifier = (msg) => {
            const el = document.getElementById('haptic-notifier');
            document.getElementById('haptic-msg').textContent = msg;
            el.classList.remove('hidden');
            setTimeout(() => el.classList.add('hidden'), 4000);
        };

        const encrypt = (t) => btoa(unescape(encodeURIComponent(t)));
        const decrypt = (c) => { try { return decodeURIComponent(escape(atob(c))); } catch { return "[PRIVATE]"; } };

        const init = async () => {
            if (!firebaseConfig.apiKey) return;
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            onAuthStateChanged(auth, user => {
                if (user) {
                    currentUserId = user.uid;
                    document.getElementById('user-status-tag').textContent = `AUTH [${user.uid.substring(0,8)}]`;
                    document.getElementById('process-btn').disabled = false;
                    loadDiaryHistory();
                    loadSharedFeed();
                }
            });

            try {
                if (initialAuthToken) await signInWithCustomToken(auth, initialAuthToken);
                else await signInAnonymously(auth);
            } catch(e) { console.error(e); }
        };

        const loadDiaryHistory = () => {
            const q = query(collection(db, 'artifacts', appId, 'users', currentUserId, 'diary_entries'));
            onSnapshot(q, snap => {
                const grid = document.getElementById('history-grid');
                grid.innerHTML = "";
                const data = snap.docs.map(d => d.data()).sort((a,b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));
                if (data.length === 0) {
                    grid.innerHTML = `<p class="text-center py-20 text-gray-600 font-black uppercase text-[10px] col-span-full italic">No historical nodes detected in this sector.</p>`;
                    return;
                }
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = "glass-card p-6 rounded-[35px] border border-white/10 hover:border-cyan-400/30 transition-all";
                    const date = item.timestamp ? new Date(item.timestamp.seconds * 1000).toLocaleDateString() : 'LIVE';
                    div.innerHTML = `
                        <div class="flex justify-between mb-4">
                            <span class="text-[9px] font-black text-cyan-400 orbitron uppercase">${date}</span>
                            <span class="text-[8px] bg-white/10 px-2 py-1 rounded-full font-black uppercase orbitron">${item.theme || 'SYNAPSE'}</span>
                        </div>
                        <p class="text-[10px] text-gray-400 leading-relaxed italic line-clamp-3">"${decrypt(item.encryptedText)}"</p>
                    `;
                    grid.appendChild(div);
                });
            });
        };

        const loadSharedFeed = () => {
            const q = query(collection(db, 'artifacts', appId, 'public', 'data', 'shared_posts'));
            onSnapshot(q, snap => {
                const feed = document.getElementById('social-shared-feed');
                if (snap.empty) return;
                feed.innerHTML = "";
                snap.docs.forEach(docSnap => {
                    const data = docSnap.data();
                    const div = document.createElement('div');
                    div.className = "glass-card p-6 rounded-[40px] border-white/10 hover:border-purple-400/50 transition-all group";
                    div.innerHTML = `
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center font-black text-[10px] orbitron uppercase">${data.userName?.substring(0,2) || 'KB'}</div>
                            <div>
                                <p class="text-[10px] font-black text-white uppercase orbitron">${data.userName || 'Anonymous'}</p>
                                <p class="text-[8px] text-gray-500 font-black uppercase tracking-widest">${new Date(data.timestamp?.seconds * 1000).toLocaleDateString()}</p>
                            </div>
                        </div>
                        <div class="bg-black aspect-square rounded-[30px] mb-4 border border-white/5 overflow-hidden flex items-center justify-center">
                             <img src="${data.imageUrl}" class="w-full h-full object-cover group-hover:scale-110 transition-all duration-700" />
                        </div>
                        <div class="flex justify-between items-center">
                            <button class="text-[8px] font-black text-cyan-400 uppercase tracking-widest hover:underline">Decode Hypotheses</button>
                            <span class="text-[8px] font-black text-gray-600 uppercase orbitron">#${docSnap.id.substring(0,4)}</span>
                        </div>
                    `;
                    feed.appendChild(div);
                });
            });
        };

        const callAI = async (text) => {
            const sys = `Diary Analysis: VIP Personal Life Mentor. 
            Tasks: 
            1. FAULT: Find a life mistake/fault in text. 
            2. SOLUTION: How to solve it. 
            3. POEM: 4-line poem. 
            4. THEME: 1-2 words. 
            5. SENTIMENT: Happy/Sad/Neutral. 
            6. POLISH: Language improvement. 
            7. ART PROMPT: Ghibli style, symbolic, abstract. 
            JSON Output: {fault, solution, poem, theme, sentiment, polished, artPrompt}`;

            const res = await fetch(GEMINI_URL + API_KEY, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    contents: [{parts: [{text: text}]}],
                    systemInstruction: { parts: [{ text: sys }] },
                    generationConfig: { responseMimeType: "application/json" }
                })
            });
            const d = await res.json();
            return JSON.parse(d.candidates[0].content.parts[0].text);
        };

        const callImg = async (prompt) => {
            const res = await fetch(IMAGEN_URL + API_KEY, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ instances: { prompt }, parameters: { sampleCount: 1 } })
            });
            const d = await res.json();
            return `data:image/png;base64,${d.predictions[0].bytesBase64Encoded}`;
        };

        window.processDiary = async () => {
            const input = document.getElementById('diary-input');
            const text = input.value.trim();
            if (text.length < 30) return showNotifier("30+ CHARACTERS REQUIRED FOR ANALYSIS");

            const loading = document.getElementById('loading');
            const mentor = document.getElementById('mentor-panel');
            loading.classList.remove('hidden');
            mentor.classList.add('hidden');
            document.getElementById('process-btn').disabled = true;

            try {
                const analysis = await callAI(text);
                
                document.getElementById('fault-text').textContent = analysis.fault;
                document.getElementById('solution-text').textContent = analysis.solution;
                document.getElementById('poem-display').textContent = analysis.poem;
                document.getElementById('polished-text').textContent = analysis.polished;
                correctedText = analysis.polished;

                const img = await callImg(analysis.artPrompt);
                lastResultImg = img;
                
                document.getElementById('img-frame').innerHTML = `<img id="m-img" src="${img}" class="w-full h-full object-cover rounded-[35px] transition-all duration-700" />`;
                document.getElementById('decode-img-slot').innerHTML = `<img src="${img}" class="w-full h-full object-cover" />`;
                
                mentor.classList.remove('hidden');
                document.getElementById('vibe-filters').classList.remove('hidden');
                document.getElementById('actions').classList.remove('hidden');
                document.getElementById('language-box').classList.remove('hidden');
                document.getElementById('decode-input-area').classList.remove('hidden');

                // Firebase Update
                await addDoc(collection(db, 'artifacts', appId, 'users', currentUserId, 'diary_entries'), {
                    encryptedText: encrypt(text),
                    theme: analysis.theme,
                    timestamp: serverTimestamp(),
                    sentiment: analysis.sentiment
                });

                showNotifier("DOPAMINE SEQUENCE COMPLETE");
            } catch (e) {
                console.error(e);
                showNotifier("NEURAL SIGNAL LOSS");
            } finally {
                loading.classList.add('hidden');
                document.getElementById('process-btn').disabled = false;
            }
        };

        window.setFilter = (f) => {
            const img = document.getElementById('m-img');
            if (!img) return;
            img.className = "w-full h-full object-cover rounded-[35px] transition-all duration-700";
            if (f !== 'none') img.classList.add(`vibe-${f}`);
        };

        window.applyCorrection = () => {
            if (correctedText) {
                document.getElementById('diary-input').value = correctedText;
                showNotifier("TEXT POLISHED");
            }
        };

        window.shareFeed = async () => {
            if (!lastResultImg) return;
            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'shared_posts'), {
                    imageUrl: lastResultImg,
                    userId: currentUserId,
                    timestamp: serverTimestamp(),
                    userName: "Kavibharathi"
                });
                showNotifier("SHARED TO NEURAL FEED (+50 CRD)");
                switchTab('social');
            } catch (e) { console.error(e); }
        };

        window.downloadImg = () => {
            if (!lastResultImg) return;
            const a = document.createElement('a');
            a.href = lastResultImg;
            a.download = `Diarytoon_Manifestation.png`;
            a.click();
        };

        window.runMatrixDecode = () => {
            const feedback = document.getElementById('decode-feedback');
            const g = document.getElementById('guess-input').value;
            feedback.className = "mt-8 p-6 rounded-3xl text-center font-black orbitron uppercase bg-cyan-400/20 text-cyan-400";
            feedback.textContent = `Testing Hypothesis: "${g}"... [DECODING AUTHENTICATED]`;
            feedback.classList.remove('hidden');
        };

        init();
    </script>
</body>
</html>